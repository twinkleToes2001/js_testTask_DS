document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".form__full-name"),t=document.querySelector(".form__phone-number"),n=document.querySelector(".form__email"),s=document.querySelector(".form__submit");t.addEventListener("input",l),t.addEventListener("focus",l),t.addEventListener("blur",l);let a=document.querySelectorAll("input[type]");for(let e of a)e.addEventListener("blur",function(){let e,t=this.type,n=this.value;if(""!=n&&"submit"!=t){switch(t){case"text":e=/^([А-ЯЁ]{1}[а-яё]+\s){2}([А-ЯЁ]{1}[а-яё]+\s*)$/g.test(n);break;case"tel":e=/^\+7\(\d{3}\) \d{3}-\d{2}-\d{2}$/g.test(n);break;case"email":e=/^[A-Za-z0-9_.%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/g.test(n)}this.classList.remove("invalid"),this.classList.remove("valid"),e?this.classList.add("valid"):this.classList.add("invalid")}}),e.addEventListener("focus",function(){this.classList.remove("invalid"),this.classList.remove("valid")});function l(e){let t=0,n="+7(___) ___-__-__".replace(/\D/g,""),s=this.value.replace(/\D/g,"");n.length>=s.length&&(s=n),this.value="+7(___) ___-__-__".replace(/./g,function(e){return/[_\d]/.test(e)&&t<s.length?s.charAt(t++):t>=s.length?"":e}),"blur"==e.type?2==this.value.length&&(this.value=""):function(e,t){if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}}(this.value.length,this)}document.querySelector(".form__full-name").addEventListener("input",function(){console.log(this.value),this.value=this.value.replace(/[а-яА-ЯЁё]\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}),e.addEventListener("keydown",e=>{/[а-яА-яЕё -]+/.test(e.key)||1!=e.key.length||e.preventDefault()}),n.addEventListener("keydown",e=>{/[A-Za-z0-9_.%+-@ ]+/.test(e.key)||1!=e.key.length||e.preventDefault()}),s.addEventListener("click",e=>{for(let t of a)""==t.value&&(t.classList.add("invalid"),e.preventDefault()),t.classList.contains("invalid")&&e.preventDefault()})});