document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("form-feedback"),t=document.querySelector(".form__full-name"),s=document.querySelector(".form__phone-number"),n=document.querySelector(".form__email"),r=document.querySelector(".form__submit"),o=document.querySelector(".form-response"),a=document.querySelector(".form-response__status"),i=document.querySelector(".form-response__desc");function l(e){e.classList.remove("invalid"),e.classList.remove("valid")}let c=[t,s,n];for(let e of c)e.addEventListener("blur",function(){let e,t=this.type,s=this.value;if(""!==s){switch(t){case"text":e=/^[А-ЯЁ\-\sа-яё]+$/g.test(s);break;case"tel":e=/^\+?(\d|(-|\s))+$/g.test(s);break;case"email":e=/^[A-Za-z0-9_.%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/g.test(s)}l(this),e?this.classList.add("valid"):this.classList.add("invalid")}}),e.addEventListener("focus",function(){l(this)});r.addEventListener("click",t=>{t.preventDefault();let s=!0;for(let e of c)""===e.value&&(e.classList.add("invalid"),s=!1),e.classList.contains("invalid")&&(s=!1);s&&function(t,s=e.getAttribute("method"),n=e.getAttribute("action")){const r=new FormData(t),l=new XMLHttpRequest;l.open(s,n),l.onload=(()=>{l.status>=400?(a.innerHTML="HTTP Ошибка!",i.innerHTML=`${l.status}:${l.statusText}:${l.response}`):201===l.status?(o.style.borderColor="green",a.innerHTML="Форма успешно отправлена!",i.innerHTML=`${l.status}:${l.statusText}:${l.response}`):a.innerHTML="Похоже, ничего не произошло..",o.style.transform="translate(-50%, 0)",setTimeout(()=>{o.style.transform="translate(-50%, calc(-100% + -31px))"},2e3)}),l.onerror=(()=>{a.innerHTML="Ошибка сети!",i.innerHTML=`${l.status}:${l.statusText}:${l.response}`}),l.send(r)}(e)})});